# NewFast: FastAPI User & Salary Management Backend

## Overview
NewFast is a backend API built using [FastAPI](https://fastapi.tiangolo.com/) for user authentication, registration, salary management, and admin operations. It uses JWT for authentication, SQLAlchemy for database ORM, and Redis for caching/session management. The project is modular, with separate routers for authentication, user, and salary operations.

## Features
- **User Registration & Login**: Secure JWT-based authentication and registration.
- **Email Verification**: Email-based user verification flows.
- **Role-Based Access**: Admin and user role separation for sensitive operations.
- **Salary Management**: CRUD operations for user salary, admin-restricted.
- **Password Hashing**: Secure password storage using bcrypt.
- **Session Management**: Redis-based session and token management.

## Project Structure
```
NewFast/
├── main.py               # FastAPI app entry point
├── model.py              # SQLAlchemy models
├── base.py               # Pydantic schemas
├── database.py           # DB connection setup
├── dependencies.py       # Dependency injection
├── requirements.txt      # Python dependencies
├── router/
│   ├── auth.py           # Auth endpoints (register, login, verify)
│   ├── user.py           # User CRUD endpoints
│   └── salary.py         # Salary CRUD endpoints
├── setting/              # App configuration
├── templates/            # HTML templates
└── ...
```

## Installation
1. **Clone the repository**
   ```bash
   git clone <repo-url>
   cd NewFast
   ```
2. **Create a virtual environment**
   ```bash
   python -m venv venv
   source venv/bin/activate  # On Windows: venv\Scripts\activate
   ```
3. **Install dependencies**
   ```bash
   pip install -r requirements.txt
   ```
4. **Set up environment variables**
   - Copy `.env.example` to `.env` and fill in required secrets (DB URL, Redis config, JWT keys, etc).

---

> **Disclaimer:**
> 
> Before running the application, make sure to update the email-related environment variables in your `.env` file:
> - `MAIL_USERNAME`
> - `MAIL_PASSWORD`
> - `MAIL_FROM`
> - `MAIL_FROM_NAME`
> - and any other email configuration variables required by your setup.
>
> Using default or placeholder values may cause email features (such as verification emails) to fail.

## Running the App
```bash
uvicorn main:app --reload
```

The API will be available at [http://localhost:8000](http://localhost:8000)

## API Endpoints
- `POST /register` - Register a new user
- `POST /login` - User login (returns JWT)
- `POST /verify` - Send email verification link to user
- `GET /verify` - Verify user email using the link
- `GET /users` - List all users (admin only)
- `POST /salary` - Add salary record (admin only)
- `PATCH /salary` - Update salary (admin only)
- `GET /user` - Get current user info
- `DELETE /user` - Delete a user (admin only)
- `PUT /user` - Update user info (admin only)

## Tech Stack
- **FastAPI**
- **SQLAlchemy**
- **Pydantic**
- **Redis**
- **Passlib (bcrypt)**
- **python-jose** (JWT)

## License
MIT License

---
*Generated by Cascade AI Assistant*
